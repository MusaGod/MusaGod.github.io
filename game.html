<!DOCTYPE html>
<html>
<head>
    <title>Game Test</title>
    <style>
        body { font-family: Arial, sans-serif; 
              text-align: left; 
              margin-top: 50px;
              background-color:#343434;
              color: white;
              display: flex;
             }
        .tab{
            overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
        }
        .tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
        }
        .tab button:hover {
  background-color: #ddd;
}
        .tab button.active {
  background-color: #ccc;
}
        .tabContent {
  display: none;
  padding: 6px 12px;
  border-top: none;
}
        .progress-bar-wrapper {
    position: relative;
    width: 100%; /* Chiều rộng của thanh */
    height: 20px; /* Chiều cao của thanh */
    margin: 10px 0; /* Khoảng cách xung quanh */
}

/* Thanh chứa */
.progress-bar-container {
    width: 100%;
    height: 100%;
    background-color: #0074D9; /* Màu xanh */
    border-radius: 5px; /* Bo góc */
    overflow: hidden; /* Đảm bảo thanh lấp đầy không bị vượt ra */
    position: absolute; /* Định vị để xếp chồng dưới lớp chữ */
    top: 0;
    left: 0;
}

/* Thanh lấp đầy */
.progress-bar-fill {
    height: 100%; /* Chiều cao đầy đủ */
    background-color: #FFDC00; /* Màu vàng */
    width: 0%; /* Ban đầu chưa có XP */
    transition: width 0.3s ease; /* Hiệu ứng trượt mượt mà */
    border-radius: 5px 0 0 5px; /* Bo góc bên trái */
}
.the-table thead th{
    background-color: #28a745; /* Màu xanh lá cây */
    color: #ffffff; /* Màu chữ trắng */
    text-transform: uppercase; /* In hoa chữ */
    text-align: center; /* Căn giữa nội dung */
    letter-spacing: 2px; /* Khoảng cách giữa các chữ cái */
    padding: 10px; /* Khoảng cách giữa nội dung và đường viền */
}
        

        .spirit{
            display:none
        }
    </style>
</head>
<body>
    <h1><span style ="background-color:tomato;">Game</span></h1>
    <div style= "background-color: #4D4D4D;
        width: 290px;
        padding: 5px;
        margin-left: 5px;
        margin: left;">
     <p id="age">Age 10 Month 0 Day 0</p>
     <h5 id="longevity">Longevity: 70 years</h5>
     <button id="pauseButton" onclick="pause()">Pause</button>
   <p id="money">Balance(in coins): 0</p>
   <p id="spiritStone" class="spirit">Balance(in stones): 0</p>
     <h5 id="net">Net/day: 1</h5>
     <h5 id="salary">Income/day: 1</h5>
     <h5 id="payment">Expense/day: 0</h5>
        <p>Ổn?</p>
    </div>
    <div style="width: 600px;">
       <div class="tab">
           <button class="tabLinks" onclick="openTab(event,'Jobs')">Jobs</button>
           <button class="tabLinks" onclick="openTab(event,'Skills')">Skills</button>
           <button class="tabLinks" onclick="openTab(event,'Shop')">Shop</button>
           <button class="tabLinks" onclick="openTab(event,'Amulet')">Amulet</button>
       </div>
        <div id="Jobs" class="tabContent">
            <table class="the-table">
                <thead>
                <tr>
                    <th>Common Jobs</th>
                    <th >Level</th>
                    <th >Income</th>
                    <th >XP/day</th>
                    <th >XP left</th>
                    <th >Max Level</th>
                </tr>
                    </thead>
                <tbody>
                <tr>
                    <td>
                        <div class="progress-bar-wrapper" onclick="run(0)">
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="0">
                        Farmer
                                </div>
                            </div>                            
                    </div>
                    </td>
                    <td class="level" id="0">Level</td>
                    <td class="income"id="0">Salary</td>
                    <td class ="XP"id="0">XP/day</td>
                    <td class ="XPleft" id="0">XP left</td>
                    <td class ="maxLevel" id="0">Max Level</td>
                </tr>
                    <tr>
                    <td>
                        <div class="progress-bar-wrapper">
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="1">
                        Good Farmer
                                </div>
                            </div>                            
                    </div>
                    </td>
                    <td>Level</td>
                    <td>Salary</td>
                    <td>XP/day</td>
                    <td>XP left</td>
                    <td>Max Level</td>
                </tr>
                    <tr>
                    <td>
                        <div class="progress-bar-wrapper">
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="2">
                        Fisherman
                                </div>
                            </div>                            
                    </div>
                    </td>
                    <td>Level</td>
                    <td>Salary</td>
                    <td>XP/day</td>
                    <td>XP left</td>
                    <td>Max Level</td>
                </tr>
                    <tr>
                    <td>
                        <div class="progress-bar-wrapper">
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="3">
                        Teacher
                                </div>
                            </div>                            
                    </div>
                    </td>
                    <td>Level</td>
                    <td>Salary</td>
                    <td>XP/day</td>
                    <td>XP left</td>
                    <td>Max Level</td>
                </tr>
                    <tr>
                    <td>
                        <div class="progress-bar-wrapper">
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="4">
                        Merchant
                                </div>
                            </div>                            
                    </div>
                    </td>
                    <td>Level</td>
                    <td>Salary</td>
                    <td>XP/day</td>
                    <td>XP left</td>
                    <td>Max Level</td>
                </tr>
               </tbody>
            </table>
            
        </div>
        
        <div id="Skills" class="tabContent"> 
            <h3>Skills</h3>
        </div>
        <div id="Shop" class="tabContent"> 
            <h3>Shop</h3>
        </div>
        <div id="Amulet" class="tabContent"> 
            <h3>Amulet</h3>
        </div>
        
   </div>
        
    <script>
        let speed = 100;
        let intervalId;
        let paused = false;
        let money = 0;
        let age = 3600;
        let salary = 1;
        let payment = 0;
        let XPcurrentJob = 20;
        let XPneededNextJob = 100;
        let test;
        let runningJob = 0;
        let jobs = [
            {name:"Farmer",level:1,XPfirstLevel:100,XPnow:0,XPperDay:1,income:10,maxLevel:0},
            {name:"Good Farmer",level:1,XPfirstLevel:100,XPnow:0,XPperDay:1,income:20,maxLevel:0},
            {name:"Fisherman",level:1,XPfirstLevel:100,XPnow:0,XPperDay:1,income:30,maxLevel:0},
            {name:"Teacher",level:1,XPfirstLevel:100,XPnow:0,XPperDay:1,income:40,maxLevel:0},
             {name:"Merchant",level:1,XPfirstLevel:100,XPnow:0,XPperDay:1,income:50,maxLevel:0},            
        ];
       function updateProgressBar(){
           var i, progressPercent = 0;
           for (i=0;i<jobs.length;i++){
               progressPercent = (jobs[i].XPnow/(jobs[i].XPfirstLevel**((9/10)+(jobs[i].level/10))))*100;
               if (jobs[i].XPnow >= jobs[i].XPfirstLevel**((9/10)+(jobs[i].level/10) )){
                   jobs[i].XPnow = 0;
                   jobs[i].level += 1;
               }
               document.querySelector('.level[id="'+i+'"]').innerText = jobs[i].level;
               document.querySelector('.income[id="'+i+'"]').innerText = jobs[i].income;
               document.querySelector('.XP[id="'+i+'"]').innerText = jobs[i].XPperDay;
               const XPleft123 = jobs[i].XPfirstLevel**((9/10)+(jobs[i].level/10)) - jobs[i].XPnow;
               document.querySelector('.XPleft[id="'+i+'"]').innerText = Math.floor(XPleft123);
               document.querySelector('.maxLevel[id="'+i+'"]').innerText = jobs[i].maxLevel;
               document.querySelector('.progress-bar-fill[id="'+i+'"]').style.width = `${progressPercent}%`;
           }
       }
        function startIncrement() {
            intervalId = setInterval(EverythingIncreaseOverTime, speed); 
        } 
        function EverythingIncreaseOverTime(){
            money = money + salary - payment;
            document.getElementById("money").innerText = "Balance(in coins): " + money;
            //Age
            var remainder;
            age++;
            remainder = age % 360;
            document.getElementById("age").innerText = "Age "+ Math.floor(age/360) + " Month " + Math.floor(remainder/30) + " Day " + (remainder % 30) ;
            //Salary and Payment
            var netPerDay;
            netPerDay = salary - payment;
            document.getElementById("net").innerText = "Net/day:  " + netPerDay;
            document.getElementById("salary").innerText = "Income/day: " + salary;
            document.getElementById("payment").innerText = "Expense/day: " + payment;
            //UNLOCK
            if (money >= 100){
                unlock("spiritStone");
            }
            //XP INCREASEMENT
            jobs[runningJob].XPnow += jobs[runningJob].XPperDay;
            updateProgressBar();
        }
        
        function pause(){
            if (paused == false){
            clearInterval(intervalId);
            paused = true;
            document.getElementById("pauseButton").innerText = "Resume";
            }
            else{
           startIncrement();
            paused = false;
            document.getElementById("pauseButton").innerText = "Pause";
        }
        }
        function openTab(evt,tabName){
            var i, tabContent, tabLinks;
            tabContent = document.getElementsByClassName("tabContent");
            for (i=0; i<tabContent.length;i++){
                tabContent[i].style.display = "none";
            }
            tabLinks = document.getElementsByClassName("tabLinks");
            for (i=0; i<tabLinks.length;i++){
                tabLinks[i].className = tabLinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display= "block";
            evt.currentTarget.className +="active";
        }
        function unlock(newFeature){
            document.getElementById(newFeature).style.display ="block";
        }
        function run(number){
            runningJob = number;
        }
       
            
        
        
        //Bắt đầu
       startIncrement();
    </script>
</body>
</html>
